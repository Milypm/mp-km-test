<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dog Toys</title>
  <link rel="stylesheet" type="text/css" href="./styles.css">
  <!-- <script type="text/javascript">var _kmq = _kmq || [];
    var _kmk = _kmk || '4a11e28406a2cd84ab8de0960c87944459255571';
    function _kms(u){
      setTimeout(function(){
        var d = document, f = d.getElementsByTagName('script')[0],
        s = d.createElement('script');
        s.type = 'text/javascript'; s.async = true; s.src = u;
        f.parentNode.insertBefore(s, f);
      }, 1);
    }
    _kms('//i.kissmetrics.io/i.js');
    _kms('//scripts.kissmetrics.io/' + _kmk + '.2.js');
  </script> -->
  <script type="text/javascript">var _kmq = _kmq || [];
    var _kmk = _kmk || '36fc8f07d9afa9b15c626012e3f9e4c5e6435dd2';
    function _kms(u){
      setTimeout(function(){
        var d = document, f = d.getElementsByTagName('script')[0],
        s = d.createElement('script');
        s.type = 'text/javascript'; s.async = true; s.src = u;
        f.parentNode.insertBefore(s, f);
      }, 1);
    }
    _kms('//i.kissmetrics.io/i.js');
    _kms('//scripts.kissmetrics.io/' + _kmk + '.2.js');
  </script>
</head>
<body>
  <div class="main-div">
    <header class="header">
      <h1>Most Popular Toys</h1>
      <p>A site to test Kissmetrics integrations</p>
    </header>
    <main class="main">
      <p>Pick your best friend favs!:</p>
      <section class="items-section">
        <div class="div-item">
          <img src="images/taco.jpg">
          <p>Fluffy Taco<span class="cost">$15.00</span></p>
          <a href="#" class="add-button" data-item="Fluffy Taco" data-price="15.00">Add to cart</a>
        </div>
        <div class="div-item">
          <img src="images/hedgehog.jpeg">
          <p>Fluffy Hedgehog<span class="cost">$15.00</span></p>
          <a href="#" class="add-button" data-item="Fluffy Hedgehog" data-price="15.00">Add to cart</a>
        </div>
        <div class="div-item sensorial-ball">
          <img src="images/ball1.jpg">
          <p>Sensorial Ball<span class="cost">$10.00</span></p>
          <a href="#" class="add-button" data-item="Sensorial Ball" data-price="10.00">Add to cart</a>
        </div>
        <div class="div-item teaser-ball">
          <img src="images/ball2.jpg">
          <p>Teaser Ball<span class="cost">$10.00</span></p>
          <a href="#" class="add-button" data-item="Teaser Ball" data-price="10.00">Add to cart</a>
        </div>
        <div class="div-item rope-margin">
          <img src="images/rope1.jpg">
          <p>Mixed Cotton Rope<span class="cost">$12.00</span></p>
          <a href="#" class="add-button" data-item="Mixed Cotton Rope" data-price="12.00">Add to cart</a>
        </div>
        <div class="div-item rope-margin">
          <img src="images/rope2.jpg">
          <p>Green Cotton Rope<span class="cost">$12.00</span></p>
          <a href="#" class="add-button" data-item="Green Cotton Rope" data-price="12.00">Add to cart</a>
        </div>
      </section>
    </main>
    <footer>
      <p class="footer-info">Get info about newest products, discounts and more!</p>
      <form class="form">
        <label for="email">Email:</label>
        <input type="email" class="email-input" name="email" required />
        <button type="submit">Sign Up</button>
      </form>
      <p class="footer-analytics">Analytics powered by <a href="https://www.kissmetricshq.com">Kissmetrics</a></p>
    </footer>
  </div>
  <script type="text/javascript">
    window._kmq.push(['record', 'Test'])
    document.querySelector('form').addEventListener('submit', e => {
      e.preventDefault();

      const email = e.target.querySelector('.email-input').value;

      if (/@/.test(email) && window._kmq) {
        window._kmq.push(['identify', email]);
      }
    })
    Array.from(document.querySelectorAll('.add-button')).forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault()

        if (window._kmq) {
          const cost = e.target.parentNode.querySelector('.cost').innerText;

          window._kmq.push(['record', 'Add to cart', { price: cost }]);
        }
      })
    })
  </script>
</body>
</html>
